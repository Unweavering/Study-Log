# ✅ 조인
- **정의** : 두 개 이상의 테이블을 연결해 하나의 결과 집합으로 만드는 연산
- **20자** : 테이블간 관련 데이터를 연결하는 연산
- MySQL에선 JOIN, MongoDB에선 lookup 쿼리
  - lookup은 RDB에 비해 성능이 떨어지므로, 조인이 많으면 RDB를 써야한다
# ✅ 조인의 종류
<img width="605" height="141" alt="image" src="https://github.com/user-attachments/assets/c17ae2ee-e861-40f8-8aa4-c56f16864f15" />

- 조인 시각화 사이트  : https://sql-joins.leopard.in.ua/
## ■ 내부 조인 (INNER JOIN)
- 두 테이블에서 **조건에 일치하는 행만** 반환.
- 교집합 개념
<img width="254" height="132" alt="image" src="https://github.com/user-attachments/assets/86eb11fc-bc5f-4c2a-a66e-f41c67c84a91" />

## ■ 왼쪽 조인 (LEFT OUTER JOIN)
- 왼쪽 테이블의 **모든 행을 포함**, 오른쪽에서 매칭 안 되면 NULL 채움.
- 왼쪽 기준 보존
<img width="255" height="132" alt="image" src="https://github.com/user-attachments/assets/89cd1be1-c1c6-42c6-b562-ce38b80c3dd8" />

## ■ 오른쪽 조인 (RIGHT OUTER JOIN)
- 오른쪽 테이블의 **모든 행을 포함**, 왼쪽에서 매칭 안 되면 NULL 채움.
- 오른쪽 기준 보존
<img width="253" height="130" alt="image" src="https://github.com/user-attachments/assets/9d84165e-2f06-45e7-ac14-abb0d7a2062e" />

## ■ 합집합 조인 (FULL OUTER JOIN)
- 두 테이블의 모든 행 포함, 매칭 안 되면 NULL 채움.
- MySQL은 직접 지원 안 하고 `UNION`으로 흉내
<img width="281" height="230" alt="image" src="https://github.com/user-attachments/assets/fe0ae808-e806-4e29-8d58-98bd9aa1a7f3" />

# ✅ 조인의 원리
## ■ 중첩 루프 조인 (Nested Loop Join)
- 중첩 for문과 같은 원리
- **원리**: A에서 한 행(row) → B 전체 스캔 → 조건 일치 찾기
- **시간복잡도**: `O(M×N)` (M, N은 테이블 크기)
- 소규모 데이터나 인덱스 있을 때 사용
## ■ 정렬 병합 조인 (Sort-Merge Join)
- 두 테이블을 **조인 키 기준으로 정렬**한 뒤 병합
- **시간복잡도**: O(M log M + N log N)
- 큰 테이블끼리 조인할 때 유리.
- 범위 조건(`>=, <=`)에서도 적합.
- 인덱스 없을 때 효과적.
## ■ 해시 조인 (Hash Join)
- 해시 테이블을 사용해 빠르게 매칭
- 주로 **대용량, 비인덱스 테이블** 조인에 사용
- **원리**: 작은 테이블을 기준으로 해시 테이블 생성 → 큰 테이블을 스캔하며 해시 탐색
- 작은 테이블이 메모리에 다 올라가면 중첩 루프 조인보다 효율적. 메모리를 초과하면 디스크를 사용하는 비용 발생
- **장점**: 인덱스 없어도 빠름.
- **단점**: 메모리 소모 심함.
### ▶ 빌드 단계 (Build Phase)
<img width="536" height="260" alt="image" src="https://github.com/user-attachments/assets/714b5be4-4062-4445-ad6e-66de259760f4" />

- 작은 테이블(보통 메모리에 들어갈 수 있는 쪽) 해시 테이블로 빌드
- 조인에 사용되는 필드가 해시 테이블의 키가 된다
### ▶ 프로브 단계 (Probe Phase)
<img width="524" height="259" alt="image" src="https://github.com/user-attachments/assets/3d940800-3a36-445f-9c19-67976a15a943" />

- 큰 테이블 스캔하면서 해시 키로 빠른 매칭
