# ERD(Entity-Relationship Diagram)
- 데이터베이스 설계의 **청사진** 역할 
- 엔터티, 속성, 관계를 시각적으로 표현해 **구조 이해**와 **개발자 간 소통** 용이
- 정규화 이전에 요구사항을 구조화하고, 중복·관계 누락을 미리 잡아냄
- **단점** : 비정형 데이터를 충분히 표현할 수 없다
<img width="621" height="146" alt="image" src="https://github.com/user-attachments/assets/9eddb376-921b-41fc-8ffe-cd70d536e0b1" />

# 예제로 배우는 ERD
## 승원 영업부서의 ERD
### 요구 사항
- 영업사원은 0 ~ n명의 고객을 관리한다.
- 고객은 0 ~ n개의 주문을 넣을 수 있다.
- 주문에는 1 ~ n개의 상품이 들어간다.
### 정답
<img width="341" height="200" alt="image" src="https://github.com/user-attachments/assets/452e0985-26f9-46c0-a344-b1b8313dd3e9" />

## 무무오브레전드의 ERD
### 요구 사항
- 선수들은 1명의 챔피언을 고를 수 있다.
- 챔피언은 한 개 이상의 스킬을 갖는다.
- 스킬은 한 개 이상의 특성을 갖는다.
### 정답
<img width="441" height="61" alt="image" src="https://github.com/user-attachments/assets/379d14fb-3994-4023-9cee-ed270c1235c9" />

# 정규화
- 잘못된 종속 관계로 인한 **이상 현상(Anomaly)**을 제거하고
- 저장 공간 효율과 데이터 일관성을 높이기 위해
- **릴레이션을 여러 개로 분리하는 과정**
- 이상 현상 예시
  - 삭제 이상: 특정 데이터 삭제 시 필요 데이터까지 함께 삭제
  - 삽입 이상: 일부 속성 값이 없어 삽입 불가
## 정규형 원칙
- **중복 최소화**: 동일 의미 데이터의 중복 저장 방지
- **독립성 확보**: 독립적인 관계는 별개의 릴레이션으로 표현
- **관계 명확화**: 각 릴레이션이 독립적으로 표현 가능해야 함
## 정규형(NF, Normal Form)
- 정규화 정도를 나타내는 단계
- 기본 정규형: 1NF, 2NF, 3NF, BCNF
- 고급 정규형: 4NF, 5NF
## 제1정규형
<img width="515" height="341" alt="image" src="https://github.com/user-attachments/assets/14057ff0-7071-4a63-af38-0d5fbe12cc5f" />

- 모든 속성은 **원자값(Atomic Value)**만 가져야 함
- 다중값/반복속성 제거 → 별도 행·테이블로 분리
## 제2정규형
<img width="530" height="361" alt="image" src="https://github.com/user-attachments/assets/52200cec-016b-4845-ba74-7fa4da6ae5c3" />

- 1NF 만족 + 부분 함수 종속 제거
- 기본키의 일부 속성에만 종속된 컬럼을 별도 테이블로 분리
## 제3정규형
<img width="456" height="363" alt="image" src="https://github.com/user-attachments/assets/74b182e9-fb57-4ff9-b879-08167b6dbb2a" />

- 2NF 만족 + 이행적 함수 종속 제거
- 후보키가 아닌 속성(`할인율`)이, 다른 후보키(`등급`)가 아닌 속성에 의존하지 않게 함
### 이행적 함수 종속
<img width="281" height="250" alt="image" src="https://github.com/user-attachments/assets/67ab5816-9822-40bd-8f4a-f73ddf07ea79" />

- 정의 : A가 B를 거쳐 C를 결정하는 종속성 (A는 기본키, B와 C는 비프라임 속성)
- `유저ID` → `할인율`이 `등급`을 거쳐 결정됨 → 이행적 함수 종속 발생
## 보이스/코드 정규형(BCNF)
- 3NF 강화 버전
- 모든 결정자가 후보키여야 함
  
- <img width="626" height="170" alt="image" src="https://github.com/user-attachments/assets/8fc03e33-36d5-4d39-b8be-00cc7275580b" />
- <img width="327" height="244" alt="image" src="https://github.com/user-attachments/assets/80e03e4d-08cf-4a8d-a5c1-09f40776c773" />
- <img width="265" height="179" alt="image" src="https://github.com/user-attachments/assets/f247d9c2-bc40-4d88-b167-381f84574c62" />
- **후보키(Candidate Key)**: `(학번, 수강명)`
- 여기서 `강사`는 후보키가 아니지만, `수강명`은 **후보키의 일부(Prime Attribute)**이므로 **3NF를 만족한다**
- 그러나 `강사`가 후보키가 아니므로 **BCNF는 만족하지 않는다**
- <img width="464" height="479" alt="image" src="https://github.com/user-attachments/assets/031e964a-3012-431f-b87e-fada52564d73" />
- 이렇게하면 BCNF도 만족한다
