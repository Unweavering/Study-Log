# 파일
#### 파일
- 메모리는 주소로 접근했는데, 파일은 **이름으로 접근**
- data 뿐만 아니라, 하드웨어 장치들도 file로 관리 (device special file)
#### 파일 속성 (metadata)
- 파일을 관리하기 위한 정보들
- 파일 이름, 위치 등
#### 파일 시스템
- OS에서 파일을 관리하는 부분
#### 디렉토리
- 파일의 메타데이터중 일부를 가지고 있는 파일
- 그 디렉토리에 속한 파일 이름, 속성 등
---
# 디스크
## 물리적 디스크
- 하드웨어
## 논리적 디스크
- 파티션
- 물리적 디스크를 여러개의 파티션으로 나눌 수 있다
``` ex. C드라이브, D드라이브```
- OS가 보는 디스크는 논리적 디스크이다
- 파티션을 file system이나 swap area로 사용가능
---
# 시스템콜 : Open(), read()
![Image](https://github.com/user-attachments/assets/fcb055de-81f7-4365-a0e4-2c64984514f7)
#### 글로벌테이블
- 시스템에 하나 존재하는 테이블
- `` ex) open한 metadata 올려두는 테이블``
#### 프로세스별 테이블
- 프로세스별로 가지고 있는 테이블
- ``ex) 프로세스가 open한 metadata의 포인터를 나열한 테이블``
- ``ex) 프로세스가 파일의 어느 위치를 접근하고 있는지 offset값``
## open("/a/b")
- root 디렉토리의 metadata 위치는 파일시스템이 알고있으니 메모리에 올린다
- 그 metadata에서 나온 파일위치를 통해 연쇄적으로 metadata를 open file table에 올린다
- PCB에 그 프로세스가 open한 metadata의 포인터가 나열된 배열이 있다
- 그 배열의 index가 파일 디스크립터다
- 여기서는 b의 파일 디스크립터를 반환하며 시스템콜 종료
## read(fd)
- 파일디스크립터인 fd를 통해 b를 read한다
- read할 때, 파일 내용을 사용자 프로그램에 직접 주는게 아니라, OS 메모리 일부에 올려놓고 그 내용을 카피해서 사용자 프로그램에 전달 한다 ▶ 버퍼 캐슁을 위함
## 버퍼캐슁
- 파일 read를 요청했는데, 이미 OS 메모리에 올라와있으면 그걸 바로 넘겨준다
- 페이징시스템과 다르게, 항상 CPU가 OS에 넘어가기 때문에 LRU, LFU 알고리즘 사용 가능 (페이징시스템은 clock 알고리즘)
